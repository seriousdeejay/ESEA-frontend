(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c22d9"],{"48cb":function(e,s,t){"use strict";t.r(s);t("b0c0"),t("a4d3"),t("e01a");var r=t("7a23"),i={class:"p-d-flex p-grid p-jc-center p-m-0"},o={class:"p-col-12 p-p-3",style:{"background-color":"#dcedc8"}},n={class:"p-grid p-col-6 p-p-3",style:{"background-color":"white","border-radius":"10px"}},c={class:"p-col-6 p-text-left"},u={class:"p-col-6 p-text-right"},a={class:"p-col-12 p-text-left"},p={class:"p-col-6 p-text-left"},d={class:"p-col-3 p-text-right"},l={class:"p-col-3 p-text-right"};function b(e,s,t,b,v,h){var y=Object(r["H"])("ProgressBar"),O=Object(r["H"])("survey-question"),j=Object(r["H"])("Button");return Object(r["z"])(),Object(r["g"])("div",i,[Object(r["k"])("div",o,[Object(r["k"])("h1",null,Object(r["L"])(e.survey.name),1),Object(r["k"])("h3",null,Object(r["L"])(e.survey.description),1)]),Object(r["k"])("div",n,[Object(r["k"])("div",c,"Topic "+Object(r["L"])(v.topicNumber+1)+" of "+Object(r["L"])(h.totalTopics),1),Object(r["k"])("div",u,[Object(r["k"])(y,{value:v.progressBarValue},{default:Object(r["R"])((function(){return[Object(r["j"])(Object(r["L"])(v.progressBarValue)+"% completed",1)]})),_:1},8,["value"])]),Object(r["k"])("div",a,[Object(r["k"])("h3",null,"Topic: '"+Object(r["L"])(h.currentTopic.name)+"'",1)]),(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(h.currentTopic.questions,(function(e){return Object(r["z"])(),Object(r["g"])(O,{class:"p-col-12",key:e.id,question:e,answer:h.answers[e.id],checkanswerrequired:v.checkAnswerRequired,onInput:function(s){return h.updateAnswer(e.id,s)},onCompleted:h.completed},null,8,["question","answer","checkanswerrequired","onInput","onCompleted"])})),128)),Object(r["k"])("div",p,[Object(r["k"])(j,{label:"Previous Topic",class:"p-button-raised p-button-sm",disabled:0===v.topicNumber,onClick:h.previousTopic},null,8,["disabled","onClick"])]),Object(r["k"])("div",d,[Object(r["k"])(j,{label:"Save for Now",class:"p-button-primary p-button-raised p-button-sm",onClick:h.saveSurvey},null,8,["onClick"])]),Object(r["k"])("div",l,[v.topicNumber+1<h.totalTopics?(Object(r["z"])(),Object(r["g"])(j,{key:0,label:"Next Topic",class:"p-button-raised p-button-sm",style:{width:"100%"},onClick:h.nextTopic},null,8,["onClick"])):(Object(r["z"])(),Object(r["g"])(j,{key:1,label:"Finish Survey",class:"p-col p-button-success p-button-raised p-button-sm",style:{width:"100%"},onClick:h.finishSurvey},null,8,["onClick"]))])])])}var v=t("2909"),h=t("1da1"),y=t("5530"),O=(t("96cf"),t("159b"),t("99af"),t("5502")),j=t("ac2a"),m=t("c045"),k={components:{SurveyQuestion:j["a"],ProgressBar:m["a"]},data:function(){return{topicNumber:0,progressBarValue:0,currentanswer:null,checkAnswerRequired:!1}},computed:Object(y["a"])(Object(y["a"])(Object(y["a"])(Object(y["a"])({},Object(O["d"])("method",["method"])),Object(O["d"])("survey",["survey"])),Object(O["d"])("surveyResponse",["surveyResponses","surveyResponse"])),{},{currentTopic:function(){var e;return null===(e=this.survey)||void 0===e?void 0:e.topics[0].sub_topics[this.topicNumber]},totalTopics:function(){var e=0;for(var s in null===(t=this.survey)||void 0===t?void 0:t.topics){var t,r;e+=null===(r=this.survey)||void 0===r?void 0:r.topics[s].sub_topics.length}return e},answers:function(){var e,s={};return(null===(e=this.surveyResponse)||void 0===e?void 0:e.id)!==this.survey.id&&this.surveyResponse.question_responses&&this.surveyResponse.question_responses.forEach((function(e){s[e.direct_indicator_id]=e.value})),s}}),created:function(){this.initialize()},methods:Object(y["a"])(Object(y["a"])(Object(y["a"])({},Object(O["b"])("survey",["fetchSurvey"])),Object(O["b"])("surveyResponse",["fetchSurveyResponses","setSurveyResponse","updateSurveyResponse","createSurveyResponse"])),{},{initialize:function(){var e=this;return Object(h["a"])(regeneratorRuntime.mark((function s(){return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.fetchSurvey({mId:e.method.id,id:e.survey.id});case 2:return s.next=4,e.fetchSurveyResponses({mId:e.method.id,sId:e.survey.id,OiD:e.$route.params.OrganisationId,query:"?organisation=".concat(e.$route.params.OrganisationId)});case 4:if(console.log(e.surveyResponses),!e.surveyResponses.length){s.next=9;break}return console.log("check"),e.setSurveyResponse(e.surveyResponses[0]),s.abrupt("return");case 9:console.log("check"),e.createSurveyResponse({mId:e.method.id,sId:e.survey.id,OrganisationId:e.$route.params.OrganisationId});case 11:case"end":return s.stop()}}),s)})))()},progress:function(e){var s=100/this.totalTopics;"back"===e&&(this.progressBarValue-=s),"next"===e&&(this.progressBarValue+=s)},previousTopic:function(){this.topicNumber>0&&(this.topicNumber-=1,this.progress("back"))},nextTopic:function(){this.topicNumber+1<this.totalTopics&&(this.checkAnswerRequired=!this.checkAnswerRequired,this.topicNumber+=1,this.progress("next"))},saveSurvey:function(){this.updateSurveyResponse({mId:this.method.id,sId:this.survey.id,surveyResponse:Object(y["a"])({},this.surveyResponse)}),this.$router.push({name:"organisationsurveys",params:{OrganisationId:this.$route.params.OrganisationId}})},finishSurvey:function(){this.surveyResponse.finished=!0,this.updateSurveyResponse({mId:this.method.id,sId:this.survey.id,surveyResponse:Object(y["a"])({},this.surveyResponse)}),this.$router.push({name:"method-survey-result",params:{OrganisationId:this.$route.params.OrganisationId,id:this.method.id,surveyId:this.survey.id}})},updateAnswer:function(e,s){this.currentanswer=s,console.log(this.currentanswer),this.updateSurveyResponse({mId:this.method.id,sId:this.survey.id,surveyResponse:Object(y["a"])(Object(y["a"])({},this.surveyResponse),{},{question_responses:[].concat(Object(v["a"])(this.surveyResponse.question_responses),[{direct_indicator_id:e,value:s}])})})},completed:function(e){console.log(">>",e)}})};k.render=b;s["default"]=k}}]);
//# sourceMappingURL=chunk-2d0c22d9.a074e87b.js.map