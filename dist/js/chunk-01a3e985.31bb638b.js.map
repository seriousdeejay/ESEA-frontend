{"version":3,"sources":["webpack:///./src/views/organisation/OrganisationSurveys.vue","webpack:///./src/views/organisation/OrganisationSurveys.vue?e79f","webpack:///./node_modules/core-js/modules/es.array.splice.js"],"names":["class","left","surveyWithResponse","onLabel","offLabel","onIcon","offIcon","changeSurveyType","right","filters","placeholder","surveys","length","loading","ref","autoLayout","value","selection","selectedRows","selectionMode","selectionToggle","dataKey","id","goToSurvey","paginator","rows","paginatorTemplate","rowsPerPageOptions","currentPageReportTemplate","columns","column","key","field","header","type","label","goToSurveyResult","slotProps","data","components","DataTable","computed","created","this","initialize","methods","fetchSurveys","mId","query","$route","params","OrganisationId","push","splice","survey","setSurvey","$router","name","surveyId","row","fetchSurveyResponses","sId","methodId","render","$","toAbsoluteIndex","toInteger","toLength","toObject","arraySpeciesCreate","createProperty","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","max","Math","min","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_LENGTH_EXCEEDED","target","proto","forced","start","deleteCount","insertCount","actualDeleteCount","A","k","from","to","O","len","actualStart","argumentsLength","arguments","TypeError"],"mappings":"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","file":"js/chunk-01a3e985.31bb638b.js","sourcesContent":["<template>\r\n      <Toolbar>\r\n        <template #left>\r\n            <ToggleButton v-model=\"surveyWithResponse\" onLabel=\"Filled in Surveys\" offLabel=\"Available Surveys\" onIcon=\"pi pi-check\" offIcon=\"pi pi-pencil\" class=\"p-mr-2\" @change=\"changeSurveyType\" />\r\n        </template>\r\n\r\n        <template #right>\r\n            <span class=\"p-input-icon-left\">\r\n                <i class=\"pi pi-search\" />\r\n                <InputText v-model=\"filters['global']\" placeholder=\"Search...\" />\r\n            </span>\r\n        </template>\r\n    </Toolbar>\r\n    <div v-if=\"surveys.length && !loading\">\r\n        <DataTable ref=\"dt\" autoLayout=\"false\" :value=\"surveys\" v-model:selection=\"selectedRows\" :selectionMode=\"selectionToggle? 'multiple' : 'single'\" :dataKey=\"id\" :loading=\"loading\" @row-select=\"goToSurvey\"\r\n        :paginator=\"true\" :rows=\"10\" :filters=\"filters\" paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n        :rowsPerPageOptions=\"[5,10,25]\" currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" class=\"p-datatable-striped\">\r\n\r\n            <template #loading>\r\n                Loading records, please wait...\r\n            </template>\r\n            <!-- <template # empty>\r\n                empty\r\n            </template> -->\r\n            <Column\r\n                v-for=\"column in columns\"\r\n                :key=\"column\"\r\n                :field=\"column.field\"\r\n                :header=\"column.header\"\r\n                ><template v-if=\"column.header === 'action'\" #body=\"slotProps\">\r\n                    <Button v-if=\"surveyWithResponse\" type=\"button\" label=\"Results\" class=\"p-button-raised p-button secondary\" @click=\"goToSurveyResult(slotProps.data)\" />\r\n                    <Button v-else label=\"Participate\"  @click=\"goToSurveyResult(slotProps.data)\" />\r\n                </template>\r\n            </Column>\r\n\r\n            <!-- <Column field=\"name\" header=\"Name\"></Column>\r\n            <Column v-if=\"false\" field=\"description\" header=\"Description\"></Column>\r\n            <Column field=\"questions.length\" header=\"Questions\"></Column>\r\n            <Column field=\"method.name\" header=\"Method\"></Column>\r\n            <Column field=\"stakeholders\" header=\"Stakeholder group\"></Column>\r\n            <Column header=\"Action\" headerStyle=\"width: 15%\">\r\n                <template #body=\"slotProps\">\r\n                    <Button v-if=\"surveyWithResponse\" type=\"button\" label=\"Results\" class=\"p-button-raised p-button secondary\" @click=\"goToSurveyResult(slotProps.data)\" />\r\n                    <Button v-else label=\"Participate\"  @click=\"goToSurveyResult(slotProps.data)\" />\r\n                </template>\r\n            </Column> -->\r\n        </DataTable>\r\n    </div>\r\n    <div v-else class=\"p-p-5 p-text-italic\">\r\n        Your organisation has no surveys to display. This can have the following reasons: <br> 1). you have done all surveys, <br> 2). related networks have not deployed a survey <br> 3). this organisation isn't member of a network.\r\n    </div>\r\n    {{surveyWithResponse}}\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\nimport DataTable from 'primevue/datatable'\r\nexport default {\r\n    components: {\r\n        DataTable\r\n    },\r\n    data () {\r\n        return {\r\n            filters: {},\r\n            loading: false,\r\n            surveyWithResponse: false,\r\n            columns: [\r\n                { field: 'name', header: 'Name' },\r\n                { field: 'description', header: 'Description' },\r\n                { field: 'questions.length', header: 'Questions' },\r\n                { field: 'method.name', header: 'Method' },\r\n                { field: 'stakeholders', header: 'Stakeholder group' }\r\n            ]\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState('survey', ['surveys']),\r\n        ...mapState('method', ['methods'])\r\n    },\r\n    created () {\r\n        this.initialize()\r\n    },\r\n    methods: {\r\n        ...mapActions('survey', ['fetchSurveys', 'setSurvey']),\r\n        ...mapActions('method', ['fetchMethods']),\r\n        ...mapActions('surveyResponse', ['fetchSurveyResponses']),\r\n        async initialize () {\r\n            this.loading = true\r\n            await this.fetchSurveys({ mId: 0, query: `?organisation=${this.$route.params.OrganisationId}` })\r\n            this.loading = false\r\n        },\r\n        async changeSurveyType () {\r\n            // this.$forceUpdate()\r\n            if (this.surveyWithResponse) {\r\n                this.loading = true\r\n                if (this.columns.length === 5) {\r\n                this.columns.push({ header: 'action' })\r\n                }\r\n                await this.fetchSurveys({ mId: 0, query: `?completedbyorganisation=${this.$route.params.OrganisationId}` })\r\n                this.loading = false\r\n            } else {\r\n                this.columns.splice(5, 1)\r\n                this.initialize()\r\n            }\r\n        },\r\n        async goToSurvey (survey) {\r\n            await this.setSurvey(survey.data)\r\n            this.$router.push({ name: 'survey-fill', params: { id: 27, surveyId: survey.data.id } })\r\n        },\r\n        async goToSurveyResult (row) {\r\n            await this.fetchSurveyResponses({ mId: 27, sId: row.id, OrganisationId: this.$route.params.OrganisationId })\r\n            this.$router.push({ name: 'method-survey-result', params: { OrganisationId: this.$route.params.OrganisationId, methodId: 27, surveyId: row.id, id: 0 } })\r\n        }\r\n    }\r\n}\r\n        // await this.fetchMethods({})\r\n        // for (const method of this.methods) {\r\n        // setTimeout(() => { this.loading = false }, 1000)\r\n</script>\r\n","import { render } from \"./OrganisationSurveys.vue?vue&type=template&id=2b1ada27\"\nimport script from \"./OrganisationSurveys.vue?vue&type=script&lang=js\"\nexport * from \"./OrganisationSurveys.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar toAbsoluteIndex = require('../internals/to-absolute-index');\nvar toInteger = require('../internals/to-integer');\nvar toLength = require('../internals/to-length');\nvar toObject = require('../internals/to-object');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar createProperty = require('../internals/create-property');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('splice');\n\nvar max = Math.max;\nvar min = Math.min;\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_LENGTH_EXCEEDED = 'Maximum allowed length exceeded';\n\n// `Array.prototype.splice` method\n// https://tc39.es/ecma262/#sec-array.prototype.splice\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  splice: function splice(start, deleteCount /* , ...items */) {\n    var O = toObject(this);\n    var len = toLength(O.length);\n    var actualStart = toAbsoluteIndex(start, len);\n    var argumentsLength = arguments.length;\n    var insertCount, actualDeleteCount, A, k, from, to;\n    if (argumentsLength === 0) {\n      insertCount = actualDeleteCount = 0;\n    } else if (argumentsLength === 1) {\n      insertCount = 0;\n      actualDeleteCount = len - actualStart;\n    } else {\n      insertCount = argumentsLength - 2;\n      actualDeleteCount = min(max(toInteger(deleteCount), 0), len - actualStart);\n    }\n    if (len + insertCount - actualDeleteCount > MAX_SAFE_INTEGER) {\n      throw TypeError(MAXIMUM_ALLOWED_LENGTH_EXCEEDED);\n    }\n    A = arraySpeciesCreate(O, actualDeleteCount);\n    for (k = 0; k < actualDeleteCount; k++) {\n      from = actualStart + k;\n      if (from in O) createProperty(A, k, O[from]);\n    }\n    A.length = actualDeleteCount;\n    if (insertCount < actualDeleteCount) {\n      for (k = actualStart; k < len - actualDeleteCount; k++) {\n        from = k + actualDeleteCount;\n        to = k + insertCount;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n      for (k = len; k > len - actualDeleteCount + insertCount; k--) delete O[k - 1];\n    } else if (insertCount > actualDeleteCount) {\n      for (k = len - actualDeleteCount; k > actualStart; k--) {\n        from = k + actualDeleteCount - 1;\n        to = k + insertCount - 1;\n        if (from in O) O[to] = O[from];\n        else delete O[to];\n      }\n    }\n    for (k = 0; k < insertCount; k++) {\n      O[k + actualStart] = arguments[k + 2];\n    }\n    O.length = len - actualDeleteCount + insertCount;\n    return A;\n  }\n});\n"],"sourceRoot":""}