(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0e493a"],{"918d":function(e,t,n){"use strict";n.r(t);var r=n("7a23");function i(e,t,n,i,a,o){var c=Object(r["H"])("my-users");return Object(r["z"])(),Object(r["g"])(c,{query:"?organisation=".concat(this.$route.params.OrganisationId),"selection-enabled":""},null,8,["query"])}var a={key:1},o={key:2},c={class:"p-input-icon-left"},s=Object(r["k"])("i",{class:"pi pi-search"},null,-1),l={key:0},u={key:1,class:"p-p-3"},d=Object(r["k"])("h3",{class:"p-text-light p-text-italic"},"There are no users to display",-1),b={class:"confirmation-content"},p=Object(r["k"])("i",{class:"pi pi-exclamation-triangle p-mr-3",style:{"font-size":"2rem"}},null,-1),g=Object(r["j"])("? "),f=Object(r["k"])("p",null,"Drag and drop your csv file here to upload.",-1);function O(e,t,n,i,O,m){var j=Object(r["H"])("ToggleButton"),h=Object(r["H"])("Button"),k=Object(r["H"])("InputText"),v=Object(r["H"])("Toolbar"),w=Object(r["H"])("Column"),R=Object(r["H"])("DataTable"),y=Object(r["H"])("Dialog"),U=Object(r["H"])("FileUpload");return Object(r["z"])(),Object(r["g"])(r["a"],null,[Object(r["k"])(v,null,{left:Object(r["R"])((function(){return[n.selectionEnabled?(Object(r["z"])(),Object(r["g"])(j,{key:0,modelValue:O.selectionToggle,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.selectionToggle=e}),onLabel:"Selecting: Enabled",offLabel:"Selecting: Disabled",onIcon:"pi pi-check",offIcon:"pi pi-times",class:"p-mr-2"},null,8,["modelValue"])):Object(r["h"])("",!0),O.addingProcess?(Object(r["z"])(),Object(r["g"])("div",o,[Object(r["k"])(h,{label:"Show members",class:"p-button-secondary p-mr-2",onClick:t[5]||(t[5]=function(e){return m.initialize()})}),Object(r["k"])(h,{label:"Invite selected Users",icon:"pi pi-plus",class:"p-button-success p-mr-2",onClick:t[6]||(t[6]=function(e){return O.Dialog=!0}),disabled:!O.selectedRows.length},null,8,["disabled"])])):(Object(r["z"])(),Object(r["g"])("div",a,[Object(r["k"])(h,{label:"Import stakeholders",icon:"pi pi-upload",class:"p-button success p-mr-2",onClick:t[2]||(t[2]=function(e){return O.importDialog=!0})}),Object(r["k"])(h,{label:"Invite users",icon:"pi pi-plus",class:"p-button-success p-mr-2",onClick:t[3]||(t[3]=function(e){return m.addableUsers()})}),Object(r["k"])(h,{label:"Remove members",icon:"pi pi-trash",class:"p-button-danger",onClick:t[4]||(t[4]=function(e){return O.Dialog=!0}),disabled:!O.selectedRows.length},null,8,["disabled"])]))]})),right:Object(r["R"])((function(){return[Object(r["k"])("span",c,[s,Object(r["k"])(k,{modelValue:O.filters["global"],"onUpdate:modelValue":t[7]||(t[7]=function(e){return O.filters["global"]=e}),placeholder:"Search..."},null,8,["modelValue"])])]})),_:1}),e.users.length?(Object(r["z"])(),Object(r["g"])("div",l,[Object(r["k"])(R,{ref:"dt",value:e.users,selection:O.selectedRows,"onUpdate:selection":t[8]||(t[8]=function(e){return O.selectedRows=e}),selectionMode:O.selectionToggle?"multiple":"single",dataKey:"id",metaKeySelection:!1,onRowSelect:m.goToSelectedUser,paginator:!0,rows:10,filters:O.filters,paginatorTemplate:"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown",rowsPerPageOptions:[5,10,25],currentPageReportTemplate:"Showing {first} to {last} of {totalRecords} products",class:"p-datatable-striped"},{default:Object(r["R"])((function(){return[(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(n.columns,(function(e){return Object(r["z"])(),Object(r["g"])(w,{field:e.field,header:e.header,key:e.field},null,8,["field","header"])})),128))]})),_:1},8,["value","selection","selectionMode","onRowSelect","filters"])])):(Object(r["z"])(),Object(r["g"])("div",u,[d])),Object(r["k"])(y,{visible:O.Dialog,"onUpdate:visible":t[11]||(t[11]=function(e){return O.Dialog=e}),style:{width:"450px"},header:"Confirm",modal:!0},{footer:Object(r["R"])((function(){return[Object(r["k"])(h,{label:"No",icon:"pi pi-times",class:"p-button-text",onClick:t[9]||(t[9]=function(e){return O.Dialog=!1})}),Object(r["k"])(h,{label:"Yes",icon:"pi pi-check",class:"p-button-text",onClick:t[10]||(t[10]=function(e){return m.addOrRemoveUsers()})})]})),default:Object(r["R"])((function(){return[Object(r["k"])("div",b,[p,Object(r["k"])("span",null,"Are you sure you want to "+Object(r["L"])(O.addingProcess?"join":"delete")+": ",1),(Object(r["z"])(!0),Object(r["g"])(r["a"],null,Object(r["F"])(O.selectedRows,(function(e){return Object(r["z"])(),Object(r["g"])("div",{key:e.id},[Object(r["k"])("b",null,Object(r["L"])(e.username),1)])})),128))]),g]})),_:1},8,["visible"]),Object(r["k"])(y,{visible:O.importDialog,"onUpdate:visible":t[13]||(t[13]=function(e){return O.importDialog=e}),style:{width:"450px"},header:"Import your stakeholders",modal:!0,class:"p-fluid"},{footer:Object(r["R"])((function(){return[Object(r["k"])(h,{label:"Remove window",icon:"pi pi-times",class:"p-button-text",onClick:t[12]||(t[12]=function(e){return O.importDialog=!1})})]})),default:Object(r["R"])((function(){return[Object(r["k"])(U,{name:"myfile",customUpload:!0,onUploader:m.onUpload,fileLimit:1,accept:".csv",maxFileSize:1e6},{empty:Object(r["R"])((function(){return[f]})),_:1},8,["onUploader"])]})),_:1},8,["visible"])],64)}var m=n("1da1"),j=n("5530"),h=(n("d3b7"),n("96cf"),n("5502")),k=n("be3b"),v={props:{columns:{type:Array,default:function(){return[{field:"username",header:"Username"},{field:"first_name",header:"First Name"},{field:"last_name_prefix",header:"Prefix"},{field:"last_name",header:"Last Name"}]}},query:{type:String,default:""},selectionEnabled:{type:Boolean,default:!1}},data:function(){return{filters:{},selectedRows:[],selectionToggle:!1,addingProcess:!1,Dialog:!1,importDialog:!1}},computed:Object(j["a"])(Object(j["a"])({},Object(h["d"])("user",["users","user"])),Object(h["d"])("organisation",["organisation"])),created:function(){this.initialize()},methods:Object(j["a"])(Object(j["a"])(Object(j["a"])({},Object(h["b"])("user",["fetchUsers","setUser"])),Object(h["b"])("organisation",["patchOrganisation"])),{},{initialize:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchUsers({query:e.query});case 2:e.selectedRows=[],e.addingProcess=!1;case 4:case"end":return t.stop()}}),t)})))()},addableUsers:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return console.log(">>",e.$route.params.OrganisationId),t.next=3,e.fetchUsers({query:"?excludeorganisation=".concat(e.$route.params.OrganisationId)});case 3:e.addingProcess=!0,e.selectionToggle=!0,e.selectedRows=[];case 6:case"end":return t.stop()}}),t)})))()},addOrRemoveUsers:function(){var e=this;return Object(m["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.patchOrganisation({id:e.organisation.id,data:e.selectedRows});case 2:e.Dialog=!1,e.initialize();case 4:case"end":return t.stop()}}),t)})))()},onUpload:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=new FormData,r.append("file",e.files[0]),n.abrupt("return",new Promise((function(e,n){var i;k["a"].post("/import-employees/".concat((null===(i=t.organisation)||void 0===i?void 0:i.id)||0,"/"),r).then((function(n){console.log(n),t.importDialog=!1,t.$toast.add({severity:"success",summary:"CSV uploaded",detail:"Your csv was correctly uploaded."}),t.initialize(),e()})).catch((function(e){n(e)}))})));case 3:case"end":return n.stop()}}),n)})))()},goToSelectedUser:function(e){var t=this;return Object(m["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(t.selectionToggle){n.next=5;break}return n.next=3,t.setUser(e.data);case 3:console.log(e.data),t.$router.push({name:"userdetails",params:{id:(null===(r=t.user)||void 0===r?void 0:r.id)||0}});case 5:case"end":return n.stop()}}),n)})))()}})};v.render=O;var w=v,R={components:{MyUsers:w}};R.render=i;t["default"]=R}}]);
//# sourceMappingURL=chunk-2d0e493a.9990b98b.js.map