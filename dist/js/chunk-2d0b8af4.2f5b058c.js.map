{"version":3,"sources":["webpack:///./src/views/organisation/OrganisationNetworks.vue","webpack:///./src/components/MyNetworks.vue","webpack:///./src/components/MyNetworks.vue?d8b8","webpack:///./src/views/organisation/OrganisationNetworks.vue?680f"],"names":["query","$route","params","OrganisationId","organisation-networks","selection-enabled","class","style","left","selectionEnabled","selectionToggle","onLabel","offLabel","onIcon","offIcon","organisationNetworks","addingProcess","label","initialize","icon","Dialog","disabled","selectedRows","length","addableNetworks","createDialog","confirmationDialog","right","filters","placeholder","networks","ref","value","selection","selectionMode","dataKey","loading","goToSelectedNetwork","paginator","rows","paginatorTemplate","rowsPerPageOptions","currentPageReportTemplate","columns","col","field","header","key","visible","modal","footer","addOrRemoveNetworks","network","id","name","props","type","Array","default","Boolean","String","data","computed","created","this","methods","fetchNetworks","patchNetwork","organisation","console","log","event","setNetwork","$router","push","render","components","MyNetworks"],"mappings":"2NACI,eAAiI,GAAnHA,MAAK,6BAAwBC,OAAOC,OAAOC,gBAAkBC,wBAAA,GAAsBC,oBAAA,I,2ECoBnFC,MAAM,qB,EACR,eAA0B,KAAvBA,MAAM,gBAAc,S,2BAUZ,qC,SAOXA,MAAM,S,EAAQ,eAA4E,MAAxEA,MAAM,8BAA6B,oCAAgC,G,GAGxFA,MAAM,wB,EACP,eAAuE,KAApEA,MAAM,oCAAoCC,MAAA,sB,0BAK3C,M,0RA/CX,eAyBW,QAxBKC,KAAI,gBACX,iBAAwL,CAApK,EAAAC,kB,iBAApB,eAAwL,G,iBAAzI,EAAAC,gB,qDAAA,EAAAA,gBAAe,IAAEC,QAAQ,qBAAqBC,SAAS,sBAAsBC,OAAO,cAAcC,QAAQ,cAAcR,MAAM,U,8CACjK,EAAAS,sB,iBAIZ,eAUM,SATU,EAAAC,e,iBAIZ,eAIM,SAHF,eAA8F,GAAtFC,MAAM,sBAAsBX,MAAM,4BAA6B,QAAK,+BAAE,EAAAY,iBAC9E,eAAuJ,GAA/ID,MAAM,gCAAgCE,KAAK,aAAab,MAAM,0BAA2B,QAAK,+BAAE,EAAAc,QAAM,IAAQC,UAAW,EAAAC,aAAaC,Q,0CANlJ,eAGM,SAFN,eAA4G,GAApGN,MAAM,eAAeE,KAAK,aAAab,MAAM,0BAA2B,QAAK,+BAAE,EAAAkB,sBACvF,eAAkI,GAA1HP,MAAM,gBAAgBE,KAAK,aAAab,MAAM,kBAAmB,QAAK,+BAAE,EAAAc,QAAM,IAAUC,UAAW,EAAAC,aAAaC,Q,6CAP5H,eAGM,SAFF,eAAgH,GAAxGN,MAAM,iBAAiBE,KAAK,aAAab,MAAM,0BAA2B,QAAK,+BAAE,EAAAmB,cAAY,MACrG,eAAgJ,GAAxIR,MAAM,iBAAiBE,KAAK,cAAcb,MAAM,kBAAmB,QAAK,+BAAE,EAAAoB,oBAAkB,IAAUL,UAAW,EAAAC,aAAaC,Q,4BAcnII,MAAK,gBACZ,iBAGO,CAHP,eAGO,OAHP,EAGO,CAFH,EACA,eAAiE,G,WAA7C,EAAAC,QAAO,U,qDAAP,EAAAA,QAAO,cAAYC,YAAY,a,mCAIpD,EAAAC,SAASP,Q,iBAApB,eAWM,SAVF,eASY,GATDQ,IAAI,KAAMC,MAAO,EAAAF,SAAkBG,UAAW,EAAAX,a,oDAAA,EAAAA,aAAY,IAAGY,cAAe,EAAAxB,gBAAe,oBAAyByB,QAAQ,KAAMC,QAAS,EAAAA,QAAU,YAAY,EAAAC,oBAC3KC,WAAW,EAAOC,KAAM,GAAKX,QAAS,EAAAA,QAASY,kBAAkB,uGACjEC,mBAAoB,CAAC,EAAD,OAAWC,0BAA0B,uDAAuDpC,MAAM,uB,CAE5G8B,QAAO,gBAAC,iBAEnB,C,8BAEQ,iBAAsB,E,mBAA9B,eAA0F,2BAApE,EAAAO,SAAO,SAAdC,G,wBAAf,eAA0F,GAA1DC,MAAOD,EAAIC,MAAQC,OAAQF,EAAIE,OAASC,IAAKH,EAAIC,O,6IAGrF,eAA4G,MAA5G,EAA4G,CAAlF,KAE1B,eAYS,GAZOG,QAAS,EAAA5B,O,oDAAA,EAAAA,OAAM,IAAGb,MAAO,gBAAkBuC,OAAO,UAAWG,OAAO,G,CAQrEC,OAAM,gBACb,iBAAqF,CAArF,eAAqF,GAA7EjC,MAAM,KAAKE,KAAK,cAAcb,MAAM,gBAAiB,QAAK,iCAAE,EAAAc,QAAM,MAC1E,eAA8F,GAAtFH,MAAM,MAAME,KAAK,cAAcb,MAAM,gBAAiB,QAAK,iCAAE,EAAA6C,8B,wBATzE,iBAMM,CANN,eAMM,MANN,EAMM,CALF,EACA,eAA2E,YAArE,4BAAyB,eAAE,EAAAnC,cAAa,iBAAoB,KAAE,I,mBAChE,eAEU,2BAFa,EAAAM,cAAY,SAAvB8B,G,wBAAZ,eAEU,OAF4BL,IAAKK,EAAQC,I,CAC/C,eAAwB,wBAAnBD,EAAQE,MAAI,Q,uGAatB,GACXC,MAAO,CACHZ,QAAS,CACLa,KAAMC,MACNC,QAAS,WACL,MAAO,CACH,CAAEb,MAAO,WAAYC,OAAQ,UAC7B,CAAED,MAAO,OAAQC,OAAQ,QACzB,CAAED,MAAO,cAAeC,OAAQ,eAChC,CAAED,MAAO,uBAAwBC,OAAQ,iBACzC,CAAED,MAAO,sBAAuBC,OAAQ,iBAIpD/B,qBAAsB,CAClByC,KAAMG,QACND,SAAS,GAEb1D,MAAO,CACHwD,KAAMI,OACNF,QAAS,IAEbjD,iBAAkB,CACd+C,KAAMG,QACND,SAAS,IAGjBG,KA3BW,WA4BP,MAAO,CACHjC,QAAS,GACTN,aAAc,GACdZ,iBAAiB,EACjBM,eAAe,EACfI,QAAQ,EACRgB,SAAS,IAGjB0B,SAAU,iCACH,eAAS,UAAW,CAAC,WAAY,aACjC,eAAS,eAAgB,CAAC,kBAEjCC,QAzCW,WA0CPC,KAAK9C,cAET+C,QAAS,iCACF,eAAW,UAAW,CAAC,gBAAiB,aAAc,kBADtD,IAEG/C,WAFD,WAEe,+JAChB,EAAKkB,SAAU,EADC,SAEV,EAAK8B,cAAc,CAAElE,MAAO,EAAKA,QAFvB,OAGhB,EAAKoC,SAAU,EACf,EAAKd,aAAe,GACpB,EAAKN,eAAgB,EACrB,EAAKN,iBAAkB,EANP,8CAQdc,gBAVD,WAUoB,wKACf,EAAK0C,cAAc,CAAElE,MAAO,wBAAF,OAA0B,EAAKC,OAAOC,OAAOC,kBADxD,OAErB,EAAKa,eAAgB,EACrB,EAAKN,iBAAkB,EACvB,EAAKY,aAAe,GAJC,8CAMnB6B,oBAhBD,WAgBwB,mLAYH,EAAK7B,cAZF,gEAYd8B,EAZc,iBAaf,EAAKe,aAAa,CAAEd,GAAID,EAAQC,GAAIQ,KAAM,CAAC,EAAKO,gBAbjC,OAcrBC,QAAQC,IAAI,EAAKF,cAdI,iJAgBzB,EAAKhD,QAAS,EACd,EAAKF,aAjBoB,mEAmBvBmB,oBAnCD,SAmCsBkC,GAAO,iKACzB,EAAK7D,gBADoB,gCAEpB,EAAK8D,WAAWD,EAAMV,MAFF,OAG1B,EAAKY,QAAQC,KAAK,CAAEpB,KAAM,iBAAkBpD,OAAQ,CAAEmD,IAAI,YAAKD,eAAL,eAAcC,KAAM,KAHpD,iDCvI1C,EAAOsB,OAAS,EAED,QFKA,GACXC,WAAY,CACRC,eGTR,EAAOF,OAASA,EAED","file":"js/chunk-2d0b8af4.2f5b058c.js","sourcesContent":["<template>\r\n    <my-networks :query=\"`?organisation=${this.$route.params.OrganisationId}`\" organisation-networks selection-enabled></my-networks>\r\n    <!-- <div class=\"p-text-italic\">\r\n        Your organisation is not participating in any networks.<br> Join a network!\r\n    </div> -->\r\n</template>\r\n\r\n<script>\r\nimport MyNetworks from '../../components/MyNetworks'\r\n\r\nexport default {\r\n    components: {\r\n        MyNetworks\r\n    }\r\n}\r\n</script>\r\n","<template>\r\n   <Toolbar>\r\n        <template #left>\r\n            <ToggleButton v-if=\"selectionEnabled\" v-model=\"selectionToggle\" onLabel=\"Selecting: Enabled\" offLabel=\"Selecting: Disabled\" onIcon=\"pi pi-check\" offIcon=\"pi pi-times\" class=\"p-mr-2\" />\r\n            <div v-if=\"!organisationNetworks\">\r\n                <Button label=\"Create Network\" icon=\"pi pi-plus\" class=\"p-button-success p-mr-2\" @click=\"createDialog = true\" />\r\n                <Button label=\"Delete Network\" icon=\"pi pi-trash\" class=\"p-button-danger\" @click=\"confirmationDialog = true\" :disabled=\"!selectedRows.length\" />\r\n            </div>\r\n            <div v-else>\r\n                <div v-if=\"!addingProcess\">\r\n                <Button label=\"Join Network\" icon=\"pi pi-plus\" class=\"p-button-success p-mr-2\" @click=\"addableNetworks()\" />\r\n                <Button label=\"Leave Network\" icon=\"pi pi-plus\" class=\"p-button-danger\" @click=\"Dialog = true\" :disabled=\"!selectedRows.length\" />\r\n                </div>\r\n                <div v-else>\r\n                    <Button label=\"Show owned networks\" class=\"p-button-secondary p-mr-2\" @click=\"initialize()\" />\r\n                    <Button label=\"request Network Participation\" icon=\"pi pi-plus\" class=\"p-button-success p-mr-2\" @click=\"Dialog=true\" :disabled=\"!selectedRows.length\"/>\r\n\r\n                </div>\r\n            </div>\r\n        </template>\r\n        <template #right>\r\n            <span class=\"p-input-icon-left\">\r\n                <i class=\"pi pi-search\" />\r\n                <InputText v-model=\"filters['global']\" placeholder=\"Search...\" />\r\n            </span>\r\n        </template>\r\n    </Toolbar>\r\n    <div v-if=\"networks.length\">\r\n        <DataTable ref=\"dt\" :value=\"networks\" v-model:selection=\"selectedRows\" :selectionMode=\"selectionToggle? 'multiple' : 'single'\" dataKey=\"id\" :loading=\"loading\" @row-select=\"goToSelectedNetwork\"\r\n        :paginator=\"true\" :rows=\"10\" :filters=\"filters\" paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n        :rowsPerPageOptions=\"[5,10,25]\" currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" class=\"p-datatable-striped\">\r\n\r\n        <template #loading>\r\n            Loading records, please wait...\r\n        </template>\r\n\r\n        <Column v-for=\"col of columns\" :field=\"col.field\" :header=\"col.header\" :key=\"col.field\" />\r\n        </Datatable>\r\n    </div>\r\n    <div v-else class=\"p-p-3\"><h3 class=\"p-text-light p-text-italic\">There are no networks to display</h3></div>\r\n\r\n    <Dialog v-model:visible=\"Dialog\" :style=\"{width: '450px'}\" header=\"Confirm\" :modal=\"true\">\r\n        <div class=\"confirmation-content\">\r\n            <i class=\"pi pi-exclamation-triangle p-mr-3\" style=\"font-size: 2rem\" />\r\n            <span>Are you sure you want to {{addingProcess? 'join': 'delete'}}: </span>\r\n                <div v-for=\"network in selectedRows\" :key=\"network.id\">\r\n                    <b>{{network.name}} </b>\r\n                    </div>\r\n        </div>?\r\n        <template #footer>\r\n            <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"Dialog = false\"/>\r\n            <Button label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"addOrRemoveNetworks()\" />\r\n      </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport { mapState, mapActions } from 'vuex'\r\n\r\nexport default {\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            default: function () {\r\n                return [\r\n                    { field: 'ispublic', header: 'Public' },\r\n                    { field: 'name', header: 'Name' },\r\n                    { field: 'description', header: 'Description' },\r\n                    { field: 'organisations.length', header: 'Organisations' },\r\n                    { field: 'created_by.username', header: 'Created by' }\r\n                ]\r\n            }\r\n        },\r\n        organisationNetworks: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        query: {\r\n            type: String,\r\n            default: ''\r\n        },\r\n        selectionEnabled: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            filters: {},\r\n            selectedRows: [],\r\n            selectionToggle: false,\r\n            addingProcess: false,\r\n            Dialog: false,\r\n            loading: true\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState('network', ['networks', 'network']),\r\n        ...mapState('organisation', ['organisation'])\r\n    },\r\n    created () {\r\n        this.initialize()\r\n    },\r\n    methods: {\r\n        ...mapActions('network', ['fetchNetworks', 'setNetwork', 'patchNetwork']),\r\n        async initialize () {\r\n            this.loading = true\r\n            await this.fetchNetworks({ query: this.query })\r\n            this.loading = false\r\n            this.selectedRows = []\r\n            this.addingProcess = false\r\n            this.selectionToggle = false\r\n        },\r\n        async addableNetworks () {\r\n            await this.fetchNetworks({ query: `?excludeorganisation=${this.$route.params.OrganisationId}` })\r\n            this.addingProcess = true\r\n            this.selectionToggle = true\r\n            this.selectedRows = []\r\n        },\r\n        async addOrRemoveNetworks () {\r\n            // const apicalls = new Promise((resolve, reject) => {\r\n            //     this.selectedRows.forEach(async (network) => {\r\n            //         const result = await this.patchNetwork({ id: network.id, data: [this.organisation] })\r\n            //         resolve(result)\r\n            //     })\r\n            // })\r\n            // await apicalls.then()\r\n            // await this.selectedRows.forEach((network) => {\r\n            //     this.patchNetwork({ id: network.id, data: [this.organisation] })\r\n            //     console.log('check')\r\n            // })\r\n            for (const network of this.selectedRows) {\r\n                await this.patchNetwork({ id: network.id, data: [this.organisation] })\r\n                console.log(this.organisation)\r\n            }\r\n            this.Dialog = false\r\n            this.initialize()\r\n        },\r\n        async goToSelectedNetwork (event) {\r\n            if (!this.selectionToggle) {\r\n                await this.setNetwork(event.data)\r\n                this.$router.push({ name: 'networkdetails', params: { id: this.network?.id || 0 } })\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./MyNetworks.vue?vue&type=template&id=746bebbe\"\nimport script from \"./MyNetworks.vue?vue&type=script&lang=js\"\nexport * from \"./MyNetworks.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","import { render } from \"./OrganisationNetworks.vue?vue&type=template&id=2500213e\"\nimport script from \"./OrganisationNetworks.vue?vue&type=script&lang=js\"\nexport * from \"./OrganisationNetworks.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}