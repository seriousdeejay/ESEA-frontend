{"version":3,"sources":["webpack:///./src/views/network/NetworkMethods.vue","webpack:///./src/views/network/NetworkMethods.vue?479b","webpack:///./src/components/MyMethods.vue","webpack:///./src/components/MyMethods.vue?e1cd"],"names":["columns","network-methods","selection-enabled","components","MyMethods","data","field","header","render","class","style","left","label","icon","importDialog","networkMethods","addingProcess","initialize","confirmationDialog","disabled","selectedRows","length","selectionEnabled","selectionToggle","onLabel","offLabel","onIcon","offIcon","addableMethods","right","filters","placeholder","methods","ref","value","selection","selectionMode","dataKey","metaKeySelection","goToSelectedMethods","paginator","rows","paginatorTemplate","rowsPerPageOptions","currentPageReportTemplate","col","key","visible","modal","footer","addMethods","removeMethods","deleteMethods","item","name","customUpload","onUpload","fileLimit","accept","maxFileSize","empty","props","type","Array","default","Boolean","computed","created","this","console","log","fetchMethods","query","network","id","createMethod","event","patchNetwork","forEach","method","i","$toast","add","severity","summary","detail","life","deleteOrganisation","formData","FormData","append","files","Promise","resolve","reject","post","then","response","catch","err","setMethod","$router","push","params"],"mappings":"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","file":"js/chunk-3ee2111e.6b6f3724.js","sourcesContent":["<template>\r\n    <my-methods :columns=columns network-methods selection-enabled></my-methods>\r\n</template>\r\n<script>\r\nimport MyMethods from '../../components/MyMethods'\r\nexport default {\r\n    components: {\r\n        MyMethods\r\n    },\r\n    data () {\r\n        return {\r\n            columns:\r\n            [\r\n                { field: 'name', header: 'Name' },\r\n                { field: 'description', header: 'Description' },\r\n                { field: 'surveys.length', header: 'Surveys' }\r\n            ]\r\n        }\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./NetworkMethods.vue?vue&type=template&id=83f061b8\"\nimport script from \"./NetworkMethods.vue?vue&type=script&lang=js\"\nexport * from \"./NetworkMethods.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","<template>\r\n    <Toolbar>\r\n        <template #left>\r\n            <Button label=\"Create Method\" icon=\"pi pi-plus\" class=\"p-button-success p-mr-2\" @click=\"importDialog = true\" />\r\n            <div v-if=\"networkMethods\">\r\n                <div v-if=\"!addingProcess\">\r\n                        <ToggleButton v-if=\"selectionEnabled\" v-model=\"selectionToggle\" onLabel=\"Selecting: Enabled\" offLabel=\"Selecting: Disabled\" onIcon=\"pi pi-check\" offIcon=\"pi pi-times\" class=\"p-mr-2\" />\r\n                        <Button label=\"Add Methods\" icon=\"pi pi-plus\" class=\"p-button-success p-mr-2\" @click=\"addableMethods()\" />\r\n                        <Button label=\"Remove Methods\" icon=\"pi pi-trash\" class=\"p-button-danger\" @click=\"confirmationDialog = true\" :disabled=\"!selectedRows.length\" />\r\n                </div>\r\n                <div v-else>\r\n                    <Button label=\"Show network methods\" class=\"p-button-success p-mr-2\" @click=\"initialize()\" />\r\n                    <Button label=\"Add selected Methods\" class=\"p-button-primary p-mr-2\" @click=\"confirmationDialog = true\" :disabled=\"!selectedRows.length\" />\r\n                </div>\r\n            </div>\r\n        </template>\r\n\r\n        <template #right>\r\n            <span class=\"p-input-icon-left\">\r\n                <i class=\"pi pi-search\" />\r\n                <InputText v-model=\"filters['global']\" placeholder=\"Search...\" />\r\n            </span>\r\n        </template>\r\n    </Toolbar>\r\n    <div v-if=\"methods.length\">\r\n        <DataTable ref=\"dt\" :value=\"methods\" v-model:selection=\"selectedRows\" :selectionMode=\"selectionToggle? 'multiple' : 'single'\" dataKey=\"id\" :metaKeySelection=\"false\" @row-select=\"goToSelectedMethods\"\r\n            :paginator=\"true\" :rows=\"10\" :filters=\"filters\" paginatorTemplate=\"FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink CurrentPageReport RowsPerPageDropdown\"\r\n            :rowsPerPageOptions=\"[5,10,25]\" currentPageReportTemplate=\"Showing {first} to {last} of {totalRecords} products\" class=\"p-datatable-striped\">\r\n\r\n            <Column v-for=\"col of columns\" :field=\"col.field\" :header=\"col.header\" :key=\"col.field\" />\r\n        </DataTable>\r\n    </div>\r\n    <div v-else class=\"p-p-3 p-text-bold\"> {{addingProcess? 'There are no methods to add, create one first!' : 'This network has no methods, add one!'}}</div>\r\n\r\n    <Dialog v-model:visible=\"confirmationDialog\" :style=\"{width: '450px'}\" header=\"Confirm\" :modal=\"true\">\r\n      <div class=\"confirmation-content\">\r\n          <i class=\"pi pi-exclamation-triangle p-mr-3\" style=\"font-size: 2rem\" />\r\n            <span v-if=\"networkMethods\">Are you sure you want to <b>{{addingProcess? 'add' : 'remove'}}</b> the following methods?</span>\r\n            <span v-else>Are you sure you want to <b>delete</b> the following methods?</span>\r\n            <br>\r\n            <div class=\"p-shadow-2 p-m-3 p-p-3\">\r\n            <div v-for=\"item in selectedRows\" :key=item.name>{{item.name}}</div>\r\n            </div>\r\n      </div>\r\n      <template #footer>\r\n        <Button label=\"No\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"(confirmationDialog = false) && (selectedRows = [])\"/>\r\n        <Button v-if=\"networkMethods\" label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"addingProcess? addMethods() : removeMethods()\" />\r\n        <Button v-else label=\"Yes\" icon=\"pi pi-check\" class=\"p-button-text\" @click=\"deleteMethods()\" />\r\n      </template>\r\n    </Dialog>\r\n\r\n    <Dialog v-model:visible=\"importDialog\" :style=\"{width: '450px'}\" header=\"Import your Method\" :modal=\"true\" class=\"p-fluid\">\r\n        <FileUpload name=\"myfile\" :customUpload=\"true\" @uploader=\"onUpload\" :fileLimit=\"1\" accept=\".yaml\" :maxFileSize=\"1000000\">\r\n            <template #empty>\r\n                <p>Drag and drop your YAML file here to upload.</p>\r\n            </template>\r\n        </FileUpload>\r\n        <template #footer>\r\n            <Button label=\"Remove window\" icon=\"pi pi-times\" class=\"p-button-text\" @click=\"importDialog = false\"/>\r\n        </template>\r\n    </Dialog>\r\n</template>\r\n\r\n<script>\r\nimport { AxiosInstance } from '../plugins/axios'\r\nimport { mapActions, mapState } from 'vuex'\r\n\r\nexport default {\r\n    props: {\r\n        columns: {\r\n            type: Array,\r\n            default: function () {\r\n                return [\r\n                    { field: 'name', header: 'Name' },\r\n                    { field: 'description', header: 'Description' },\r\n                    { field: '', header: '' }\r\n                ]\r\n            }\r\n        },\r\n        networkMethods: {\r\n            type: Boolean,\r\n            default: false\r\n        },\r\n        selectionEnabled: {\r\n            type: Boolean,\r\n            default: false\r\n        }\r\n    },\r\n    data () {\r\n        return {\r\n            filters: {},\r\n            selectedRows: [],\r\n            selectionToggle: false,\r\n            addingProcess: false,\r\n            confirmationDialog: false,\r\n            importDialog: false\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState('method', ['methods', 'method']),\r\n        ...mapState('network', ['network'])\r\n    },\r\n    created () {\r\n        this.initialize()\r\n    },\r\n    methods: {\r\n        ...mapActions('method', ['fetchMethods', 'setMethod', 'uploadMethod']),\r\n        ...mapActions('network', ['patchNetwork']),\r\n        async initialize () {\r\n            if (this.networkMethods) {\r\n                console.log('eee')\r\n                this.fetchMethods({ query: `?network=${this.network?.id || 0}` })\r\n            } else {\r\n                this.fetchMethods({})\r\n            }\r\n            this.selectedRows = []\r\n            this.confirmationDialog = false\r\n            this.addingProcess = false\r\n        },\r\n        createMethod (event) {\r\n            console.log('create method')\r\n        },\r\n        addableMethods () {\r\n            this.fetchMethods({ query: `?excludenetwork=${this.network?.id || 0}` })\r\n            this.addingProcess = true\r\n            this.selectionToggle = true\r\n        },\r\n        async addMethods () {\r\n            await this.patchNetwork(this.selectedRows)\r\n            this.initialize()\r\n        },\r\n\r\n        async removeMethods () {\r\n            await this.patchNetwork(this.selectedRows)\r\n            this.selectedRows.forEach((method, i) => {\r\n                this.$toast.add({ severity: 'success', summary: 'The following method was removed', detail: `${method.name}`, life: 3000 })\r\n            })\r\n            this.initialize()\r\n        },\r\n        async deleteMethods () {\r\n            await this.selectedRows.forEach((method, i) => {\r\n                this.deleteOrganisation({ id: method?.id || 0 })\r\n                this.$toast.add({ severity: 'success', summary: 'The following method was deleted', detail: `${method.name}`, life: 3000 })\r\n            })\r\n        },\r\n        async onUpload (event) {\r\n            // for (const file of event.files) {\r\n            //     console.log(file)\r\n            // }\r\n            var formData = new FormData()\r\n            formData.append('file', event.files[0])\r\n            return new Promise((resolve, reject) => {\r\n            AxiosInstance.post('/import-yaml/', formData)\r\n            .then(response => {\r\n                this.importDialog = false\r\n                this.$toast.add({ severity: 'success', summary: 'Method created', detail: 'New method', life: 3000 })\r\n                this.initialize()\r\n            resolve()\r\n            })\r\n            .catch(err => { reject(err) })\r\n            })\r\n        },\r\n        goToSelectedMethods (event) {\r\n            this.$toast.add({ severity: 'info', summary: 'Method Selected', detail: `${event.data.name}`, life: 3000 })\r\n            if (!this.selectionToggle) {\r\n                this.setMethod({ ...event.data })\r\n                this.$router.push({ name: 'methoddetails', params: { id: event.data.id } })\r\n                // this.$router.push({ name: 'networkmethod', params: { NetworkId: this.network.id, MethodId: this.method.id } })\r\n            }\r\n       }\r\n    }\r\n}\r\n</script>\r\n","import { render } from \"./MyMethods.vue?vue&type=template&id=5e432697\"\nimport script from \"./MyMethods.vue?vue&type=script&lang=js\"\nexport * from \"./MyMethods.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script"],"sourceRoot":""}